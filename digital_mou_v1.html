<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ConsumerVerse & åˆä½œå¤¥ä¼´ | åˆä½œå‚™å¿˜éŒ„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
        }
        .progress-bar-fill {
            transition: width 0.5s ease-in-out;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding 0.5s ease-out;
        }
        .accordion-content.open {
            max-height: 1000px; /* Adjust as needed */
            transition: max-height 1s ease-in, padding 0.5s ease-in;
        }
        .btn-disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
        }
        .loader {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #3498db;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto max-w-4xl p-4 sm:p-8">

        <!-- Header -->
        <header class="text-center mb-8">
            <div class="flex justify-center items-center gap-4 mb-2">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-blue-600">
                    <path d="M12 2L2 7V17L12 22L22 17V7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M2 7L12 12L22 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 12V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M17 4.5L7 9.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <h1 class="text-2xl sm:text-3xl font-bold text-gray-900">é¿éŒ¯å¯¶ Bitrobo</h1>
            </div>
            <p class="text-gray-600">åˆä½œå‚™å¿˜éŒ„ (Memorandum of Understanding)</p>
        </header>

        <!-- Progress Bar -->
        <div class="w-full mb-10">
            <div class="w-full bg-gray-200 rounded-full h-2.5">
                <div id="progressBar" class="bg-blue-600 h-2.5 rounded-full progress-bar-fill" style="width: 10%"></div>
            </div>
            <div class="flex justify-between mt-2 text-xs sm:text-sm text-gray-500">
                <span id="step-label-1" class="font-semibold text-blue-600">åˆä½œæ‘˜è¦</span>
                <span id="step-label-2">æ¢æ¬¾ç´°ç¯€</span>
                <span id="step-label-3">è³‡è¨Šç¢ºèª</span>
                <span id="step-label-4">å®Œæˆç°½ç½²</span>
            </div>
        </div>

        <main class="bg-white p-6 sm:p-10 rounded-2xl shadow-lg">

            <!-- Step 1: Welcome & Summary -->
            <section id="step-1">
                <h2 class="text-xl sm:text-2xl font-bold mb-2">æ­¡è¿ï¼è®“æˆ‘å€‘æ”œæ‰‹é–‹å•Ÿæ•¸æ“šé©…å‹•çš„éŠ·å”®æ–°æ™‚ä»£</h2>
                <p class="text-gray-600 mb-8">é€™æ˜¯ä¸€ä»½æˆ‘å€‘é›™æ–¹åˆä½œçš„å‚™å¿˜éŒ„ï¼Œæ—¨åœ¨é€éã€Œé¿éŒ¯å¯¶ Bitroboã€çš„å…è²»è©¦ç”¨è¨ˆç•«ï¼Œå…±åŒå‰µé€ é›™è´ã€‚ä»¥ä¸‹æ˜¯æœ¬æ¬¡åˆä½œçš„ä¸‰å¤§é‡é»ï¼š</p>

                <div class="grid md:grid-cols-3 gap-6 text-center">
                    <div class="bg-blue-50 p-6 rounded-xl border border-blue-200">
                        <div class="mx-auto bg-blue-100 rounded-full w-16 h-16 flex items-center justify-center mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                        </div>
                        <h3 class="font-bold text-lg mb-2">æ‚¨å°‡ç²å¾— (You Get)</h3>
                        <p class="text-sm text-gray-600">å…è²»ä½¿ç”¨ã€Œå¸‚å ´åˆ†æã€èˆ‡ã€Œåº«å­˜çµ±æ•´ã€å…©å¤§æ ¸å¿ƒæ¨¡çµ„ï¼Œç²¾æº–æŒæ¡è¶¨å‹¢ã€å‘Šåˆ¥åº«å­˜ç…©æƒ±ã€‚</p>
                    </div>
                    <div class="bg-green-50 p-6 rounded-xl border border-green-200">
                        <div class="mx-auto bg-green-100 rounded-full w-16 h-16 flex items-center justify-center mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                        </div>
                        <h3 class="font-bold text-lg mb-2">æˆ‘å€‘éœ€è¦ (We Ask)</h3>
                        <p class="text-sm text-gray-600">æ‚¨æˆæ¬Šã€ŒåŒ¿ååŒ–ã€èˆ‡ã€ŒèšåˆåŒ–ã€å¾Œçš„ç‡Ÿé‹æ•¸æ“šï¼Œå¹«åŠ©æˆ‘å€‘è¨“ç·´æ›´è°æ˜çš„ AI æ¨¡å‹ï¼Œå›é¥‹çµ¦æ‰€æœ‰å•†å®¶ã€‚</p>
                    </div>
                    <div class="bg-gray-100 p-6 rounded-xl border border-gray-200">
                        <div class="mx-auto bg-gray-200 rounded-full w-16 h-16 flex items-center justify-center mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>
                        </div>
                        <h3 class="font-bold text-lg mb-2">å®‰å…¨æ‰¿è«¾ (Our Promise)</h3>
                        <p class="text-sm text-gray-600">æˆ‘å€‘çµ•ä¸æ´©æ¼ä»»ä½•å¯è­˜åˆ¥æ‚¨å•†æ¥­æ©Ÿå¯†çš„å€‹é«”æ•¸æ“šï¼Œä¸¦ä»¥æœ€é«˜æ¨™æº–ä¿éšœæ‚¨çš„è³‡æ–™å®‰å…¨ã€‚</p>
                    </div>
                </div>
                <div class="text-right mt-10">
                    <button onclick="nextStep(2)" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors">æˆ‘äº†è§£äº†ï¼ŒæŸ¥çœ‹è©³ç´°æ¢æ¬¾</button>
                </div>
            </section>

            <!-- Step 2: Detailed Terms -->
            <section id="step-2" class="hidden">
                <h2 class="text-xl sm:text-2xl font-bold mb-2">åˆä½œå‚™å¿˜éŒ„è©³ç´°æ¢æ¬¾</h2>
                <p class="text-gray-600 mb-8">ä»¥ä¸‹æ˜¯å®Œæ•´çš„åˆä½œæ¢æ¬¾ã€‚æˆ‘å€‘ç‚ºæ¯ä¸€æ¢éƒ½é™„ä¸Šäº†ã€Œç™½è©±æ–‡å°å¹«æ‰‹ã€ï¼Œå¹«åŠ©æ‚¨å¿«é€Ÿç†è§£ã€‚</p>
                
                <div id="accordion" class="space-y-4">
                    <!-- Accordion Items here... (same as before) -->
                     <div class="border border-gray-200 rounded-lg">
                        <button class="accordion-header w-full flex justify-between items-center p-4 text-left font-semibold">
                            ç¬¬ä¸€æ¢ã€åˆä½œå…§å®¹
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transform transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                        </button>
                        <div class="accordion-content px-4 pb-4">
                            <div class="bg-gray-50 p-3 rounded-md mb-3">
                                <h4 class="font-bold text-sm text-gray-700">ğŸ’¡ ç™½è©±æ–‡å°å¹«æ‰‹ï¼š</h4>
                                <p class="text-sm text-gray-600">é€™ä¸€æ¢èªªæ˜äº†æ‚¨èƒ½å…è²»è©¦ç”¨å“ªäº›åŠŸèƒ½ã€è©¦ç”¨å¤šä¹…ï¼Œä»¥åŠç‚ºäº†è®“ AI è®Šè°æ˜ï¼Œæ‚¨éœ€è¦æä¾›å“ªäº›ã€ŒåŒ¿ååŒ–ã€å¾Œçš„è³‡æ–™ã€‚</p>
                            </div>
                            <div class="prose prose-sm max-w-none text-gray-600">
                                <ol class="list-decimal pl-5">
                                    <li><b>è©¦ç”¨ç¯„åœèˆ‡æ™‚ç¨‹ï¼š</b>ä¹™æ–¹åŒæ„åƒèˆ‡æœ¬ç³»çµ±ä¹‹å…è²»è©¦ç”¨è¨ˆç•«ï¼Œè©¦ç”¨ç¯„åœåŒ…å«å¸‚å ´åˆ†ææ¨¡çµ„(A)èˆ‡åº«å­˜çµ±æ•´æ¨¡çµ„(B)ã€‚è©¦ç”¨æœŸé–“å°‡æ–¼ä¸‹æ–¹è³‡è¨Šç¢ºèªé å¡«å¯«ã€‚</li>
                                    <li><b>æ¨¡çµ„åŠŸèƒ½èˆ‡äº¤ä»˜é …ç›®ï¼š</b>ç”²æ–¹æ‡‰æ–¼è©¦ç”¨æœŸé–“æä¾›ä¹™æ–¹ç©©å®šä¹‹ç³»çµ±å­˜å–æ¬Šé™ï¼Œä¸¦æä¾›å¿…è¦ä¹‹ç·šä¸Šæ•™å­¸èˆ‡æŠ€è¡“æ”¯æ´ã€‚</li>
                                    <li><b>è³‡æ–™äº¤æ›èˆ‡ä½¿ç”¨æ¬Šé™ï¼š</b>ä¹™æ–¹åŒæ„æä¾›åŒ¿ååŒ–èˆ‡èšåˆåŒ–è™•ç†å¾Œä¹‹é›»å•†ç‡Ÿé‹æ•¸æ“šã€‚ç”²æ–¹æ‰¿è«¾åƒ…å°‡æ•¸æ“šç”¨æ–¼è¨“ç·´ AI æ¨¡å‹ã€æ”¹å–„ç”¢å“è³ªé‡åŠé€²è¡Œç¸½é«”å¸‚å ´è¶¨å‹¢åˆ†æï¼Œçµ•ä¸æ´©æ¼ä»»ä½•å¯è­˜åˆ¥ä¹™æ–¹ç¨ç«‹å•†æ¥­æ©Ÿå¯†ä¹‹å€‹é«”æ•¸æ“šã€‚</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <div class="border border-gray-200 rounded-lg">
                        <button class="accordion-header w-full flex justify-between items-center p-4 text-left font-semibold">
                            ç¬¬äºŒã€ä¸‰æ¢ã€æ¬Šåˆ©ç¾©å‹™èˆ‡ä¿å¯†
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transform transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                        </button>
                        <div class="accordion-content px-4 pb-4">
                            <div class="bg-gray-50 p-3 rounded-md mb-3">
                                <h4 class="font-bold text-sm text-gray-700">ğŸ’¡ ç™½è©±æ–‡å°å¹«æ‰‹ï¼š</h4>
                                <p class="text-sm text-gray-600">é€™è£¡è¦å®šäº†æˆ‘å€‘é›™æ–¹çš„åŸºæœ¬è²¬ä»»ï¼Œæœ€é‡è¦çš„å°±æ˜¯ï¼šæˆ‘å€‘æ›¿æ‚¨ä¿å®ˆå•†æ¥­æ©Ÿå¯†ï¼Œæ‚¨ä¹Ÿæ›¿æˆ‘å€‘ä¿å®ˆç”¢å“æ©Ÿå¯†ï¼Œå¤§å®¶äº’ç›¸å°Šé‡ã€‚</p>
                            </div>
                            <div class="prose prose-sm max-w-none text-gray-600">
                                <p><b>ç¬¬äºŒæ¢ã€æ¬Šåˆ©èˆ‡ç¾©å‹™ï¼š</b>ç”²æ–¹æ‡‰ç¢ºä¿ç³»çµ±é‹è¡ŒåŠè³‡æ–™å®‰å…¨ã€‚ä¹™æ–¹æ‡‰æä¾›çœŸå¯¦æ•¸æ“šä¸¦çµ¦äºˆä½¿ç”¨å›é¥‹ã€‚</p>
                                <p><b>ç¬¬ä¸‰æ¢ã€ä¿å¯†æ¢æ¬¾ï¼š</b>ç”²ä¹™é›™æ–¹åŒæ„ï¼Œå°æ–¼å› æœ¬åˆä½œè€ŒçŸ¥æ‚‰æˆ–æŒæœ‰ä¹‹å°æ–¹ä»»ä½•æœªå…¬é–‹ä¹‹è³‡è¨Šï¼Œå‡è² ä¿å¯†ç¾©å‹™ã€‚æ­¤ç¾©å‹™ä¸å› æœ¬å‚™å¿˜éŒ„çµ‚æ­¢æˆ–å±†æ»¿è€Œå¤±æ•ˆã€‚</p>
                            </div>
                        </div>
                    </div>
                    <div class="border border-gray-200 rounded-lg">
                        <button class="accordion-header w-full flex justify-between items-center p-4 text-left font-semibold">
                            ç¬¬å››æ¢è‡³ç¬¬å…«æ¢ã€å…¶ä»–æ¢æ¬¾
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transform transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
                        </button>
                        <div class="accordion-content px-4 pb-4">
                            <div class="bg-gray-50 p-3 rounded-md mb-3">
                                <h4 class="font-bold text-sm text-gray-700">ğŸ’¡ ç™½è©±æ–‡å°å¹«æ‰‹ï¼š</h4>
                                <p class="text-sm text-gray-600">é€™éƒ¨åˆ†æ˜¯æ¨™æº–çš„æ³•å¾‹æ”¶å°¾æ¢æ¬¾ï¼Œä¸»è¦å…§å®¹åŒ…æ‹¬ï¼šè©¦ç”¨å…è²»ï¼Œæœªä¾†æ”¶è²»æœƒå¦å¤–è«‡ï¼›ç”¢å“çš„æ™ºæ…§è²¡ç”¢æ¬Šæ˜¯æˆ‘å€‘çš„ï¼›å¦‚æœçœŸçš„æœ‰çˆ­è­°ï¼Œæˆ‘å€‘åœ¨æ–°ç«¹åœ°æ–¹æ³•é™¢è§£æ±ºã€‚</p>
                            </div>
                            <div class="prose prose-sm max-w-none text-gray-600">
                                <p><b>ç¬¬å››æ¢ã€è²»ç”¨ï¼š</b>æœ¬æ¬¡è©¦ç”¨å…è²»ã€‚æœªä¾†è‹¥ç¹¼çºŒä½¿ç”¨ï¼Œé›™æ–¹å¦è¨‚å•†æ¥­åˆç´„ã€‚</p>
                                <p><b>ç¬¬äº”æ¢ã€æœŸé–“èˆ‡è§£ç´„ï¼š</b>å‚™å¿˜éŒ„æœ‰æ•ˆæœŸåŒè©¦ç”¨æœŸï¼Œä»»ä¸€æ–¹å¯æå‰ä¸‰åæ—¥æ›¸é¢é€šçŸ¥çµ‚æ­¢ã€‚</p>
                                <p><b>ç¬¬å…­æ¢ã€æ™ºæ…§è²¡ç”¢æ¬Šï¼š</b>æœ¬ç³»çµ±ä¹‹æ™ºæ…§è²¡ç”¢æ¬Šæ­¸å±¬ç”²æ–¹ã€‚</p>
                                <p><b>ç¬¬ä¸ƒæ¢ã€çˆ­è­°è§£æ±ºï¼š</b>è‹¥æœ‰çˆ­è­°ï¼Œä»¥è‡ºç£æ–°ç«¹åœ°æ–¹æ³•é™¢ç‚ºç¬¬ä¸€å¯©ç®¡è½„æ³•é™¢ã€‚</p>
                                <p><b>ç¬¬å…«æ¢ã€å…¶ä»–äº‹é …ï¼š</b>æœ¬å‚™å¿˜éŒ„ç‚ºåˆä½œæ„å‘ï¼Œé™¤ä¿å¯†èˆ‡æ™ºè²¡æ¬Šæ¢æ¬¾å¤–ï¼Œä¸å…·å¼·åˆ¶æ³•å¾‹ç´„æŸåŠ›ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex justify-between mt-10">
                    <button onclick="prevStep(1)" class="bg-gray-200 text-gray-800 font-bold py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors">è¿”å›æ‘˜è¦</button>
                    <button onclick="nextStep(3)" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors">æˆ‘å·²é–±è®€ä¸¦ç†è§£æ‰€æœ‰æ¢æ¬¾</button>
                </div>
            </section>

            <!-- Step 3: Information Confirmation -->
            <section id="step-3" class="hidden">
                <h2 class="text-xl sm:text-2xl font-bold mb-2">æœ€å¾Œä¸€æ­¥ï¼šè«‹ç¢ºèªé›™æ–¹è³‡è¨Š</h2>
                <p class="text-gray-600 mb-8">è«‹å¡«å¯«è²´å…¬å¸çš„è³‡è¨Šä¸¦ç¢ºèªè©¦ç”¨æœŸé–“ï¼Œå³å¯å®Œæˆç°½ç½²ã€‚</p>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Party A -->
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <h3 class="font-bold text-lg mb-4">ç”²æ–¹ (æä¾›æ–¹)</h3>
                        <div class="space-y-3">
                            <div><span class="font-semibold">å…¬å¸åç¨±ï¼š</span>ConsumerVerse</div>
                            <div><span class="font-semibold">çµ±ä¸€ç·¨è™Ÿï¼š</span>XXXXXX</div>
                            <div><span class="font-semibold">ä»£è¡¨äººï¼š</span>[ç”²æ–¹ä»£è¡¨äºº]</div>
                            <div><span class="font-semibold">åœ°å€ï¼š</span>[ç”²æ–¹åœ°å€]</div>
                        </div>
                    </div>
                    <!-- Party B -->
                    <div class="bg-blue-50 p-6 rounded-lg border border-blue-200">
                        <h3 class="font-bold text-lg mb-4">ä¹™æ–¹ (è©¦ç”¨æ–¹) - è«‹å¡«å¯«</h3>
                        <form id="partyBForm" class="space-y-4">
                            <div>
                                <label for="companyName" class="block text-sm font-medium text-gray-700">å…¬å¸å…¨å</label>
                                <input type="text" id="companyName" name="companyName" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                            </div>
                            <div>
                                <label for="taxId" class="block text-sm font-medium text-gray-700">çµ±ä¸€ç·¨è™Ÿ</label>
                                <input type="text" id="taxId" name="taxId" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                            </div>
                             <div>
                                <label for="representative" class="block text-sm font-medium text-gray-700">ä»£è¡¨äºº</label>
                                <input type="text" id="representative" name="representative" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                            </div>
                             <div>
                                <label for="address" class="block text-sm font-medium text-gray-700">å…¬å¸åœ°å€</label>
                                <input type="text" id="address" name="address" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                            </div>
                        </form>
                    </div>
                </div>

                 <div class="mt-8 bg-gray-50 p-6 rounded-lg">
                     <h3 class="font-bold text-lg mb-4">è©¦ç”¨æœŸé–“</h3>
                     <div class="grid sm:grid-cols-2 gap-4 items-center">
                        <div>
                            <label for="startDate" class="block text-sm font-medium text-gray-700">é–‹å§‹æ—¥æœŸ</label>
                            <input type="date" id="startDate" name="startDate" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        <div>
                            <label for="endDate" class="block text-sm font-medium text-gray-700">çµæŸæ—¥æœŸ</label>
                            <input type="date" id="endDate" name="endDate" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                     </div>
                 </div>

                <div class="mt-8 border-t pt-6">
                    <div class="flex items-start">
                        <input id="agreeCheckbox" type="checkbox" class="h-4 w-4 text-blue-600 border-gray-300 rounded mt-1 focus:ring-blue-500">
                        <label for="agreeCheckbox" class="ml-3 block text-sm text-gray-700">
                            æœ¬äººï¼ˆå³ä»£è¡¨äººï¼‰å·²è©³é–±ã€ç†è§£ä¸¦åŒæ„ä¸Šè¿°æ‰€æœ‰æ¢æ¬¾ï¼Œä¸¦ç¢ºèªæ‰€å¡«å¯«ä¹‹ä¹™æ–¹è³‡è¨ŠåŠè©¦ç”¨æœŸé–“ç„¡èª¤ï¼Œé¡˜ä»¥æ­¤ä½œç‚ºé›™æ–¹åˆä½œä¹‹ä¾æ“šã€‚
                        </label>
                    </div>
                </div>

                <div class="flex justify-between mt-10">
                    <button onclick="prevStep(2)" class="bg-gray-200 text-gray-800 font-bold py-3 px-6 rounded-lg hover:bg-gray-300 transition-colors">è¿”å›æ¢æ¬¾</button>
                    <button id="signButton" onclick="handleSignClick()" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg btn-disabled flex items-center justify-center gap-2" disabled>
                        <span id="signButtonText">ç¢ºèªç°½ç½²åˆä½œå‚™å¿˜éŒ„</span>
                        <div id="signButtonLoader" class="loader hidden"></div>
                    </button>
                </div>
            </section>
            
            <!-- Step 4: Success -->
            <section id="step-4" class="hidden text-center">
                 <div class="mx-auto bg-green-100 rounded-full w-24 h-24 flex items-center justify-center mb-6">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <h2 class="text-2xl sm:text-3xl font-bold mb-2">ç°½ç½²å®Œæˆï¼Œåˆä½œæ„‰å¿«ï¼</h2>
                <p class="text-gray-600 mb-4">æˆ‘å€‘å·²æ”¶åˆ°æ‚¨çš„ç°½ç½²ï¼Œç³»çµ±å°‡åœ¨ 24 å°æ™‚å…§ç‚ºæ‚¨é–‹é€šå¸³è™Ÿã€‚</p>
                <p class="text-gray-600 mb-8">ä¸€ä»½å·²ç°½ç½²çš„å‚™å¿˜éŒ„å‰¯æœ¬å·²å¯„é€è‡³æ‚¨çš„é›»å­ä¿¡ç®±ã€‚æœŸå¾…èˆ‡æ‚¨å…±å‰µä½³ç¸¾ï¼</p>
                <div id="summary" class="text-left bg-gray-50 p-6 rounded-lg max-w-md mx-auto"></div>
            </section>

        </main>
        
        <footer class="text-center mt-8 text-sm text-gray-500">
            <p>&copy; <span id="year"></span> ConsumerVerse. All Rights Reserved.</p>
        </footer>
    </div>

    <script>
        // !!é‡è¦!! è«‹å°‡æ­¤è™•æ›¿æ›ç‚ºæ‚¨è‡ªå·±çš„ Google Apps Script Web App URL
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbze5_WbtyXzF64oJheNw4TedXJ2BPYIOQXjmZpIvY0vN4BdA0dYVNM__H5u3Wgsw31m/exec";

        let currentStep = 1;
        const totalSteps = 4;

        function updateProgressBar() {
            const progress = ((currentStep - 1) / (totalSteps - 1)) * 90 + 10;
            document.getElementById('progressBar').style.width = `${progress}%`;
            
            for (let i = 1; i <= totalSteps; i++) {
                const label = document.getElementById(`step-label-${i}`);
                if (i <= currentStep) {
                    label.classList.add('font-semibold', 'text-blue-600');
                } else {
                    label.classList.remove('font-semibold', 'text-blue-600');
                }
            }
        }

        function showStep(stepNumber) {
            for (let i = 1; i <= totalSteps; i++) {
                document.getElementById(`step-${i}`).classList.add('hidden');
            }
            document.getElementById(`step-${stepNumber}`).classList.remove('hidden');
            window.scrollTo(0, 0);
        }

        function nextStep(step) {
            if (step > currentStep) {
                currentStep = step;
                showStep(currentStep);
                updateProgressBar();
            }
        }

        function prevStep(step) {
            if (step < currentStep) {
                currentStep = step;
                showStep(currentStep);
                updateProgressBar();
            }
        }

        function handleSignClick() {
            if (!validateForm()) return;
            
            displaySummary();
            submitDataToGoogleSheet();
        }

        async function submitDataToGoogleSheet() {
            const signButton = document.getElementById('signButton');
            const buttonText = document.getElementById('signButtonText');
            const buttonLoader = document.getElementById('signButtonLoader');

            // é¡¯ç¤ºè¼‰å…¥å‹•ç•«
            buttonText.textContent = "å‚³é€ä¸­...";
            buttonLoader.classList.remove('hidden');
            signButton.disabled = true;

            const formData = {
                timestamp: new Date().toLocaleString('zh-TW', { timeZone: 'Asia/Taipei' }),
                companyName: document.getElementById('companyName').value,
                taxId: document.getElementById('taxId').value,
                representative: document.getElementById('representative').value,
                address: document.getElementById('address').value,
                startDate: document.getElementById('startDate').value,
                endDate: document.getElementById('endDate').value,
            };

            try {
                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    mode: 'cors',
                    cache: 'no-cache',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData),
                    redirect: 'follow' 
                });
                
                const result = await response.json();

                if (result.status === 'success') {
                    // æˆåŠŸï¼Œå‰å¾€ä¸‹ä¸€æ­¥
                    nextStep(4);
                } else {
                    // å¤±æ•—ï¼Œé¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
                    throw new Error(result.message || 'æäº¤å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚');
                }

            } catch (error) {
                console.error('Error:', error);
                alert(`ç™¼ç”ŸéŒ¯èª¤ï¼š${error.message}`);
                // æ¢å¾©æŒ‰éˆ•ç‹€æ…‹
                buttonText.textContent = "ç¢ºèªç°½ç½²åˆä½œå‚™å¿˜éŒ„";
                buttonLoader.classList.add('hidden');
                checkFormCompletion(); // é‡æ–°å•Ÿç”¨æŒ‰éˆ•ï¼ˆå¦‚æœè¡¨å–®æœ‰æ•ˆï¼‰
            }
        }

        function validateForm() {
            const form = document.getElementById('partyBForm');
            const startDate = document.getElementById('startDate');
            const endDate = document.getElementById('endDate');
            let isValid = true;

            form.querySelectorAll('input[required]').forEach(input => {
                if (!input.value.trim()) {
                    input.classList.add('border-red-500');
                    isValid = false;
                } else {
                    input.classList.remove('border-red-500');
                }
            });
            
            if (!startDate.value) {
                startDate.classList.add('border-red-500');
                isValid = false;
            } else {
                startDate.classList.remove('border-red-500');
            }
            if (!endDate.value) {
                endDate.classList.add('border-red-500');
                isValid = false;
            } else {
                endDate.classList.remove('border-red-500');
            }
            
            if (!isValid) {
                alert('è«‹å¡«å¯«æ‰€æœ‰æ¨™ç¤ºç‚ºå¿…å¡«çš„æ¬„ä½ï¼');
            }
            
            return isValid;
        }

        function displaySummary() {
            const companyName = document.getElementById('companyName').value;
            const taxId = document.getElementById('taxId').value;
            const representative = document.getElementById('representative').value;
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            
            const summaryDiv = document.getElementById('summary');
            summaryDiv.innerHTML = `
                <h4 class="font-bold mb-3 text-lg">ç°½ç½²è³‡è¨Šæ‘˜è¦</h4>
                <p class="mb-2"><strong>å…¬å¸åç¨±ï¼š</strong> ${companyName}</p>
                <p class="mb-2"><strong>çµ±ä¸€ç·¨è™Ÿï¼š</strong> ${taxId}</p>
                <p class="mb-2"><strong>ä»£è¡¨äººï¼š</strong> ${representative}</p>
                <p><strong>è©¦ç”¨æœŸé–“ï¼š</strong> ${startDate} è‡³ ${endDate}</p>
            `;
        }
        
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                const icon = header.querySelector('svg');
                content.classList.toggle('open');
                icon.classList.toggle('rotate-180');
                if (content.classList.contains('open')) {
                    content.style.paddingTop = '1rem';
                } else {
                    content.style.paddingTop = '0';
                }
            });
        });

        const agreeCheckbox = document.getElementById('agreeCheckbox');
        const signButton = document.getElementById('signButton');
        const requiredInputs = document.querySelectorAll('#partyBForm input[required], #startDate, #endDate');

        function checkFormCompletion() {
            let allFilled = true;
            requiredInputs.forEach(input => {
                if (!input.value.trim()) {
                    allFilled = false;
                }
            });

            if (allFilled && agreeCheckbox.checked) {
                signButton.disabled = false;
                signButton.classList.remove('btn-disabled');
            } else {
                signButton.disabled = true;
                signButton.classList.add('btn-disabled');
            }
        }

        requiredInputs.forEach(input => input.addEventListener('input', checkFormCompletion));
        agreeCheckbox.addEventListener('change', checkFormCompletion);

        document.getElementById('year').textContent = new Date().getFullYear();
        
        showStep(1);
        updateProgressBar();
    </script>

</body>
</html>
